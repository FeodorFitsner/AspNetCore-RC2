before_build:
- dotnet restore src\MyCoreWebApp\project.json
build:
  project: MyCoreWebApp.sln
  parallel: true
  verbosity: minimal
after_build:
- dotnet publish .\src\MyCoreWebApp --output %appveyor_build_folder%\dist --configuration Debug --no-build
artifacts:
- path: dist
  name: webapp
#- dir dist
#deploy_script:
#- '"C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe" -source:IisApp=''%appveyor_build_folder%\dist'' -dest:IisApp=''%website_name%'',ComputerName=''https://%website_name%.scm.azurewebsites.net/msdeploy.axd'',UserName=''$%website_name%'',Password=''%website_psw%'',IncludeAcls=''False'',AuthType=''Basic'' -verb:sync -enablerule:AppOffline -enableRule:DoNotDeleteRule -retryAttempts:2'